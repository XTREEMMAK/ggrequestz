# =================================
# GameRequest Configuration
# Copy this file to .env and update values
# =================================

# =================================
# REQUIRED CONFIGURATION
# =================================

# Database Configuration (REQUIRED)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=ggrequestz
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_database_password

# Authentication Configuration (REQUIRED - Choose one provider)
AUTH_PROVIDER=local_auth

# Option 1: Authentik OIDC
# Set AUTH_PROVIDER=authentik
AUTHENTIK_CLIENT_ID=your_authentik_client_id
AUTHENTIK_CLIENT_SECRET=your_authentik_client_secret
AUTHENTIK_ISSUER=https://auth.yourdomain.com/application/o/gamerequest
AUTHENTIK_REDIRECT_URI=https://yourdomain.com/api/auth/callback

# Option 2: Generic OIDC (Keycloak, Auth0, Azure AD, etc.)
# Set AUTH_PROVIDER=oidc_generic
OIDC_CLIENT_ID=your_oidc_client_id
OIDC_CLIENT_SECRET=your_oidc_client_secret
OIDC_ISSUER=https://your-provider.com
OIDC_REDIRECT_URI=https://yourdomain.com/api/auth/oidc/callback
OIDC_SCOPE=openid profile email

# Option 3: API Integration (Sync users from external REST API)
# Set AUTH_PROVIDER=api_integration  
API_BASE_URL=https://your-api.com
API_KEY=your_api_key
API_USER_ENDPOINT=/api/users
API_SYNC_ENDPOINT=/api/users/sync
API_TIMEOUT=5000
ENABLE_AUTO_SYNC=true
SYNC_INTERVAL=300000

# Option 4: Webhook Integration (Receive user updates via webhooks)
# Set AUTH_PROVIDER=webhook_integration
WEBHOOK_SECRET=your_webhook_secret
WEBHOOK_VALIDATE_SIGNATURE=true
WEBHOOK_VERIFY_TOKEN=your_verify_token

# Option 5: Local Authentication (Default - no additional config needed)
# Set AUTH_PROVIDER=local_auth
# Admin user will be created during first-run setup

# Session Security (REQUIRED)
SESSION_SECRET=your_very_long_random_secret_string_at_least_32_characters_long

# IGDB API Integration (REQUIRED)
IGDB_CLIENT_ID=your_igdb_client_id
IGDB_CLIENT_SECRET=your_igdb_client_secret

# =================================
# OPTIONAL CONFIGURATION
# =================================

# Application Settings
NODE_ENV=production
APP_PORT=3000
PM2_INSTANCES=max

# Database Migration
AUTO_MIGRATE=true

# Cache Configuration (Optional - Falls back to memory cache)
REDIS_URL=redis://localhost:6379

# Search Engine (Optional - Falls back to basic search)
TYPESENSE_HOST=localhost
TYPESENSE_PORT=8108
TYPESENSE_PROTOCOL=http
TYPESENSE_API_KEY=xyz123

# External Service Integrations

# ROMM Game Library Integration (Optional)
ROMM_SERVER_URL=https://romm.yourdomain.com
ROMM_USERNAME=your_romm_username
ROMM_PASSWORD=your_romm_password
# Alternative: Use API key instead of username/password
# ROMM_API_KEY=your_romm_api_key

# Gotify Notifications (Optional)
GOTIFY_URL=https://notifications.yourdomain.com
GOTIFY_TOKEN=your_gotify_token

# n8n Webhook Automation (Optional)
N8N_WEBHOOK_URL=https://automation.yourdomain.com/webhook

# =================================
# DOCKER CONFIGURATION
# =================================

# External Service Ports (When using Docker)
POSTGRES_EXTERNAL_PORT=5432
REDIS_EXTERNAL_PORT=6379
TYPESENSE_EXTERNAL_PORT=8108

# External Services (For docker-compose.external.yml)
EXTERNAL_POSTGRES_HOST=your-external-db-host.com
EXTERNAL_POSTGRES_PORT=5432
EXTERNAL_POSTGRES_DB=ggrequestz
EXTERNAL_POSTGRES_USER=postgres
EXTERNAL_POSTGRES_PASSWORD=your_external_db_password

EXTERNAL_REDIS_URL=redis://your-external-redis-host:6379

EXTERNAL_TYPESENSE_HOST=your-external-search-host.com
EXTERNAL_TYPESENSE_PORT=8108
EXTERNAL_TYPESENSE_PROTOCOL=https

# =================================
# DEVELOPMENT CONFIGURATION
# =================================

# Development Ports (For development docker-compose)
DEV_PORT=3000
DEV_POSTGRES_PORT=5432
DEV_REDIS_PORT=6379
DEV_TYPESENSE_PORT=8108

# =================================
# PROXY AND SSL (Optional)
# =================================

# Traefik Proxy Configuration
DOMAIN=yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# Gotify Admin (If using docker gotify service)
GOTIFY_ADMIN_PASSWORD=secure_admin_password